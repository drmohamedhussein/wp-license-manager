# WP License Manager - Critical Error Fix Summary

**Date:** 2024-08-23
**Time:** 15:29:12 UTC

## Issue

A critical error occurred when activating the WP License Manager plugin, resulting in a `PHP Fatal error: Uncaught TypeError: WPLM_Subscription_Manager::process_subscription_actions(): Argument #1 ($subscription_id) must be of type int, string given`.

The error originated in `wp-content/plugins/wp-license-manager/includes/class-subscription-manager.php` on line 983, specifically within the `process_subscription_actions` method. This method was being called via a WordPress hook (`wp_loaded`) where the `$subscription_id` was being passed as a string instead of the expected integer type.

## Fix Applied

To resolve the `TypeError`, the `process_subscription_actions` method in `wp-license-manager/includes/class-subscription-manager.php` was modified to explicitly cast the `$subscription_id` to an integer at the beginning of the function. However, the `int` type declaration in the method signature caused the error to persist.

To finally fix this, the `int` type declaration was removed from the `$subscription_id` parameter in the `process_subscription_actions` method signature. This allows the method to accept string values from WordPress hooks, and the internal casting `(int) $subscription_id` handles the conversion and validation. Additionally, default values were added for `$action` (empty string) and `$data` (empty array) parameters to prevent potential errors if they are not explicitly provided by the hook.

**Modified File:** `wp-license-manager/includes/class-subscription-manager.php`
**Change:** 
- Removed `int` type hint from `$subscription_id` parameter.
- Added default empty string for `$action` parameter.
- Added default empty array for `$data` parameter.
